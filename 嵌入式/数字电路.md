# **第** **1** **章 数字电路基础**



## **1.1** **引言**

数字电路是现代科技和工程领域中不可或缺的基础。从计算机系统到通信设备，从家

庭电子产品到工业自动化，数字电路无处不在，影响着我们的生活和工作。本章节旨在向

读者介绍数字电路的基本概念、原理和应用，为后期学习单片机开发打基础。

## **1.2** **二进制数据表达**

### **1.2.1** **二进制简介**

二进制是一种数字表示法，它使用两个不同的数字符号，0 和 1，来表示数值。下面是

一些二进制的基本概念：

1. 位（**bit**）

不同于十进制中，每个位可以用 0-9 表示，二进制中每位都是 0 或 1，每个二进制位我

们称之为一个 bit，可以表示两种状态。位一般用 b 代替，例如 8b 代表 8 个 bit。

2. **字节（byte)**

8bit组成一个字节，总共可以表示 256种状态。字节一般用 B代替，例如 8B一般表示 8

个字节。

3. **其他计量单位（K，M，…）**

K：表示 2 的十次方，例如，1KB 就是 1024B

M：表示 2 的 20 次方。例如：1MB 就是 1048576B

G：表示 2 的 30 次方。

T：表示 2 的 40 次方。

比这些更高的计量单位，尽管有定义，但是现实中我们很少用到，这里就不再赘述。

二进制是计算机科学的基础，现实中的绝大部分信息都可以完全数字化，并进一步用二进制来表示和存储。



### 1.2.2 用二进制表达文字

计算机使用二进制（0 和 1）来表达和处理各种信息，包括文字。文字在计算机内部并不是直接以它们在纸上或屏幕上显示的形式存储的，而是被转换成一种或多种编码格式。以下是计算机如何使用二进制表达文字的基本过程：

1. **字符编码**：
   - 为了在计算机中存储和传输文字，我们需要一种将字符（如字母、数字、标点符号等）映射到唯一数字的方法。这种映射称为字符编码。
   - 最早的字符编码之一是 ASCII（美国信息交换标准代码），它使用 7 位二进制数来表示 128 个不同的字符（包括大小写字母、数字、标点符号和控制字符）。但由于 7 位不便于计算机内部处理（通常使用字节作为基本单位），ASCII 实际上使用了一个字节（8 位）来存储每个字符，其中最高位（最左边的位）通常设为 0。
   - 随着国际化需求的增长，需要表示更多的字符（如中文、日文、阿拉伯文等），于是出现了各种扩展的字符编码，如 ISO 8859、GB2312、Big5 等。但这些编码系统之间并不兼容，给国际交流带来了困难。
   - 为了解决这个问题，Unicode 编码系统被开发出来。Unicode 使用一个或多个代码点（code point）来表示一个字符，每个代码点都有一个唯一的数字标识。Unicode 标准定义了一个庞大的字符集，几乎包含了世界上所有已知的文字和符号。
2. **Unicode 编码与二进制**：
   - Unicode 字符可以使用多种编码形式在计算机中存储和传输，其中最常见的是 UTF-8、UTF-16 和 UTF-32。
   - UTF-8（8 位 Unicode 转换格式）是一种可变长度的编码方式，它使用 1 到 4 个字节来表示一个 Unicode 字符。对于 ASCII 字符，UTF-8 的编码与 ASCII 相同；对于其他字符，UTF-8 使用额外的字节来表示。这使得 UTF-8 在处理包含大量 ASCII 字符的文本时非常高效，同时也支持全 Unicode 字符集。
   - 当我们将一个 Unicode 字符转换为 UTF-8 编码时，实际上是将其唯一的数字标识转换为一系列的二进制位（bits），然后这些二进制位被分组为字节（bytes）进行存储和传输。
3. **字体和渲染**：
   - 仅仅知道字符的二进制编码还不够，我们还需要知道如何将这些编码转换为人类在屏幕上看到的实际形状（即字体）。这通常是通过字体文件（如 TrueType、OpenType 等）来完成的。
   - 字体文件包含了字符的矢量图形描述，计算机可以根据这些描述和字符的编码来渲染出对应的字符形状。这个过程称为文本的渲染或排版。

总结起来，计算机使用二进制表达文字的过程包括将字符映射到唯一的数字（字符编码），将这些数字转换为二进制位（如 UTF-8 编码），然后通过字体文件将这些二进制位渲染为实际的字符形状。



### 1.2.3 用二进制表达图片

用二进制表达图片涉及将图像的像素信息转换为二进制数据。以下是基本步骤：

1. **颜色表示**
   - 对于彩色图像，**每个像素通常由三个颜色通道（红色、绿色和蓝色，简称RGB**）组成。每个颜色通道通常使用**一个字节（8位**）来表示，其值范围从0（无颜色）到255（最大颜色强度）。
   - 对于灰度图像，每个像素只有一个亮度值，同样可以用一个字节来表示。
2. **图像数据**
   - 图像的宽度和高度决定了像素的数量。例如，一个100x100像素的图像将有10,000个像素。
   - 对于彩色图像，每个像素由三个字节表示（RGB各一个字节），所以总字节数是像素数乘以3。对于灰度图像，每个像素一个字节。
3. **二进制转换**
   - 将每个像素的颜色值（或灰度值）转换为二进制数。例如，红色通道的值为255时，其二进制表示为`11111111`。
   - 将所有像素的二进制数连接在一起，形成一个连续的二进制数据流。
4. **图像文件格式**
   - 图像数据不仅包含像素值，还包含关于图像如何显示的信息（如颜色空间、分辨率、压缩方式等）。这些信息与像素数据一起被封装在图像文件格式中，如JPEG、PNG、BMP等。
   - 每个图像文件格式都有其特定的文件头和元数据部分，这些部分也包含二进制数据。
5. **存储和传输**
   - 完整的图像文件（包括文件头、元数据和像素数据）被存储为二进制文件，可以在计算机系统中读取和处理。
   - 在网络上传输图像时，也是传输这些二进制数据。
6. **图像处理和显示**
   - 当图像数据被读取到计算机内存中时，它可以被各种图像处理软件或库进行操作和变换。
   - 最终，图像数据被传递给显示设备（如显示器或打印机），这些设备根据像素的二进制值来生成对应的颜色或亮度。

总之，用二进制表达图片涉及将图像的像素信息（包括颜色或灰度值）转换为二进制数据，并将这些数据与图像的其他元数据一起封装在特定的文件格式中。这些二进制数据可以被存储、传输和处理，最终用于在显示设备上呈现图像。



### 1.2.4 用二进制表达声音

计算机是使用**二进制代码**来表达和处理所有数据的，包括声音。在计算机中，声音被转化为电子信号，然后被抓取并转化为数字，这个过程叫做**模拟-数字转换（ADC）**。



声音的模拟-数字转换过程可以简化为以下三个步骤：



1. **取样**：声音信号是连续的，在取样过程中，我们将这个连续信号转换为离散信号。假设我们每秒钟取样44100次（这是CD音质的标准取样率），我们就可以将每秒的声音切分为44100个小部分。
2. **量化**：量化是将每个样本的振幅值映射到最近的整数。例如，在16比特的音频中，我们可以将振幅值映射到-32768到32767之间的整数。
3. **编码**：最后，将量化后的振幅值转换为二进制代码。例如，整数100可能会被转换为二进制的“01100100”。



所以，假设我们有一个声音信号，它在某一特定瞬间的振幅值为100，然后我们将100转换为二进制的“01100100”，这个二进制代码就所代表的声音。



进一步地，如果把这个过程反过来，将二进制代码“01100100”转化回为十进制的100，然后引发出相应的振幅的声音，我们就可以复原这段声音。整个这个过程叫做**数字-模拟转换（DAC）**。

可视化示例：

```plaintext
声音信号（模拟信号）-->  取样定时信号  -->  量化振幅值  -->  二进制编码（数字信号）

    /\                       /\                    /\                 /\
连续波形               离散波点               整数值                二进制代码
```



### 1.2.5 用二进制表达视频



用二进制表达视频的过程其实与表达声音和图片相似，都涉及到数据的数字化和编码。具体来说，视频可以被视为一系列连续的图像（帧）与声音的组合。以下是视频用二进制表达的基本步骤：

1. 图像编码
   - 每一帧图像都需要经过与图片编码类似的步骤，即将像素信息转换为二进制数据。这通常包括颜色空间转换（如从RGB到YUV）、子采样、变换编码（如离散余弦变换DCT）、量化、熵编码等步骤。
2. 声音编码
   - 视频中的音频部分也需要经过与声音编码类似的步骤，即将连续的音频信号转换为离散的样本，然后对这些样本进行量化、编码为二进制数据。
3. 同步与封装
   - 编码后的图像帧和音频数据需要按照一定的时间顺序和格式进行同步和封装，以形成完整的视频文件。这个过程中，可能还需要添加一些额外的信息，如时间戳、帧类型、编解码参数等。
4. 视频文件格式
   - 封装后的视频数据被存储为特定的视频文件格式，如MP4、AVI、MKV等。这些文件格式定义了如何组织和存储视频数据，以便播放器能够正确地解码和播放。
5. 压缩
   - 为了减少存储空间和传输带宽的需求，视频文件通常会使用各种压缩技术。这些技术可能包括帧间压缩（如利用相邻帧之间的相似性来减少数据量）、帧内压缩（如利用图像内部的冗余信息来减少数据量）、有损压缩（如通过牺牲一定的图像质量来减少数据量）等。
6. 解码与播放
   - 当需要播放视频时，视频文件被读取并解码回原始的图像帧和音频数据。然后，这些数据被连续地显示在屏幕上并播放出来，形成我们看到的视频画面和听到的声音。

需要注意的是，视频编码是一个复杂的过程，涉及到多个学科的知识和技术。不同的视频编码标准（如H.264、H.265等）会采用不同的编码算法和参数设置，以实现不同的压缩效率和图像质量。同时，视频编码也是一个不断发展的领域，随着技术的进步和应用场景的变化，新的编码标准和算法不断涌现。





## 1.3 数字电路



将信息数字化后，我们可以方便的用二进制表示信息。而现代计算机技术的基础—— 数字电路，研究的就是如何用电表示二进制。其实这件事非常简单，例如下面的一个电路

![image-20240514132726217](assets/image-20240514132726217.png)

​		当开关闭合，信号输出就有 5v 电压；当开关断开，由于下拉电阻存在，信号输出电压 变为 0，我们可以将信号输出的高电平态视为 1，低电平态视为 0，即可用电表示二进制。 所以数字电路就是对电路进行定性分析（高或者低），而不用去考虑精确电压是否会有误差。





### 1.3.1 数字电路仿真软件——Digital

为了学习数字电路，给大家介绍一款数字电路拟真软件。

官方网站：https://github.com/hneemann/Digital

最新版下载地址：https://github.com/hneemann/Digital/releases/download/v0.30/Digital.zip

该软件运行需要 Java 环境，下载地址为：https://download.oracle.com/java/17/latest/jdk-

17_windows-x64_bin.msi

安装完成后打开 digital，看到如下页面即安装成功：

![image-20240514133801754](assets/image-20240514133801754.png)



### **1.3.2** **基础逻辑门电路**

基础逻辑电路重点掌握表述该逻辑的四种方式：逻辑表达式、真值表、逻辑符号、口

诀。

**1****）非门**

（1）从“组件——输入输出”中，选择一个输入和一个输出；

（2）从“组件——导线”中选择一个地、一个电源和一个下拉电阻；

（3）从“组件——开关”中选择一个继电器；

（4）右键点击输入，标签输入 A；

（5）右键点击输出，标签输入 B；

（6）右键点击继电器，勾选“闭合继电器”；



![image-20240514140157984](assets/image-20240514140157984.png)

开始仿真后，尝试改变 A 的输入电平，观察 B 输出的电平变化。可以看到 AB 的信号

关系如下：

![image-20240514140228865](assets/image-20240514140228865.png)

这种输入信号和输出信号完全相反的电路，叫做非门，上面的这张0-1关系表，我们称

之为真值表。Digital 软件也可以根据电路自动生成真值表：

![image-20240514140244180](assets/image-20240514140244180.png)

可以看到 Digital 软件不但给出了 AB 的真值表，还给出了 B 和 A 的逻辑关系。

在今后我们使用非门时，不会再画该电路，而是直接采用“组件——逻辑”里面的非

门，如图示：非门逻辑符号。

![image-20240514140306349](assets/image-20240514140306349.png)

**2**）与门

（1）从“组件——输入输出”中，选择两个输入和一个输出；

（2）从“组件——导线”中选择两个地、一个电源和一个下拉电阻；

（3）从“组件——开关”中选择两个继电器；

给输入编号 A、B，给输出编号 C，按照如下图连接

![image-20240514140820622](assets/image-20240514140820622.png)

开启仿真，观察 C 与 AB 之间的关系，可得真值表如下图所示：

![image-20240514140835229](assets/image-20240514140835229.png)

在今后我们使用与门时，不会再绘制该电路，而是直接采用“组件——逻辑”里面的

与门，如图示：与门逻辑符号。

![image-20240514140941426](assets/image-20240514140941426.png)

**3**）或门

（1）从“组件——输入输出”中，选择两个个输入和一个输出；

（2）从“组件——导线”中选择两个地、一个电源和一个下拉电阻；

（3）从“组件——开关”中选择两个继电器；

给输入编号 A、B，给输出编号 C，按照如下图连接：

![image-20240514141541483](assets/image-20240514141541483.png)

开启仿真，观察 C 与 AB 之间的关系，可得真值表如下图所示：
![image-20240514141601514](assets/image-20240514141601514.png)

口诀：有 1 出 1，全 0 出 0。



### **1.3.3** **其他门电路**

​		与或非三门我们一般称之为基础门电路，而其他门电路可以用这三种门电路组合得到。下面我们给出一些门电路真值表以及用与或非三门的组合实现。（这些实现并非最简实现，

我们的这门数字电路基础，更多只考虑可行性，不考虑优化）

#### **1**）异或门

真值表和电路图：

![image-20240514141725466](assets/image-20240514141725466.png)

口诀：奇数出 1，偶数出 0。



#### **2**）与非门

![image-20240514141914846](assets/image-20240514141914846.png)





#### 3) **或非门**

**真值表和电路图：**

![image-20240514142125727](assets/image-20240514142125727.png)



#### 4) **异或非门**

![image-20240514142158416](assets/image-20240514142158416.png)



#### **5**）逻辑门电路总结

![image-20240522092223511](assets/image-20240522092223511.png)





### **1.3.4** **运算器**



#### **1**）半加器



​     现在我们来考虑如何用电路来实现 1 位加法。假如有两个 1 位二进制数 A、B，它们的

和为 1 位二进制数 S，那么存在如下枚举：

（1）如果 A=0，B=0，那么 S=0；

（2）如果 A=1，B=0，那么 S=1；

（3）如果 A=0，B=1，那么 S=1；

（4）如果 A=1，B=1，那么 S=0，而且产生一个进位 C=1。

也就是说，对于加法运算，应该两个输入 A 和 B，两个输出 S 和 C，S 表示和，C 表示

是否产生进位，也就是说真值表如下图所示：

![image-20240522092330923](assets/image-20240522092330923.png)

其中 A、B 与 S 的关系为异或，与 C 的关系为与，得到如下电路图：

![image-20240522092347119](assets/image-20240522092347119.png)



#### **2**）将半加器封装成一个组件



（1）将电路另存到 Digital 的安装目录的 lib 中



![image-20240522092704435](assets/image-20240522092704435.png)



（2）保存半加器电路到 class_code 目录

![image-20240522092725082](assets/image-20240522092725082.png)

![image-20240522092928452](assets/image-20240522092928452.png)

**（3）使用封装好的电路**

![image-20240522093057721](assets/image-20240522093057721.png)





#### **3**）全加法器



**半加器实现一位全加器。**

半加器只能处理两个数的运算，但在实际计算中，如果我们做加法的两个位不是最低

的位，那就要考虑低位可能产生的进位。也就是说，一个功能完整的 1 位加法器，应该考

虑三个输入，除了 A、B 两个加数，还要考虑是否存在低位进位 Cin。

为了处理三个数相加，我们可以用两个半加器分别处理两个累加过程，同时两个累加

器产生的进位 C1 和 C2，不可能同时为 1，（因为如果 C1 位 1，那么 S1=0，S1=0，C2 不可

能为 1），且二者只要有一个为 1，则输出进位为 1，所以关系为或，最终呈现的电路如下：

![image-20240522093420320](assets/image-20240522093420320.png)

其中的黄色方块为子电路，内容就是我们上面实现的半加器。



#### **4** ）4位加法器



多位加法器就是多个加法器的串联，下面我们以 4 位加法器为例来展示多位加法器电

路：

添加输入 Cin，A，B，右键点击 A 和 B，将位数调整为 4；

添加两个“组件——导线”中的分裂器，右键点击将其设置如下图所示：

![image-20240522095306990](assets/image-20240522095306990.png)

将分裂器输入端与 A、B相连，并添加 8个“组件——导线”里面的隧道，分别命名为

A0、A1、A2、A2、B0、B1、B2、B3，并接在分裂器的输出端，如图示：

说明：图中 A0 管道是给标签名起名位 A_0 来实现的

![image-20240522095331658](assets/image-20240522095331658.png)

添加输出 S，并将位数调整为 4，并添加分裂器，输入/输出设置为 1，1，1，1/4，并将

输出端连接到 S，输出端连接四个隧道 S0、S1、S2、S3，如图示：

![image-20240522095352995](assets/image-20240522095352995.png)

![image-20240522095408545](assets/image-20240522095408545.png)

今后我们在用到多位加法器时，不会再次绘制该电路，而是会直接使用“组件——运

算器”中的加法器，如图示：

![image-20240522095451304](assets/image-20240522095451304.png)